<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="test_image_x_yaw_regulator">
    <RetryUntilSuccessful num_attempts="50">
      <ForceFailure>
        <Sequence>
          <Sleep msec="10000"/>
          <ForceSuccess>
            <RetryUntilSuccessful num_attempts="2">
              <ImageXYawRegulator direction=""
                                  image_segment="0.5"
                                  tolerance="0.01"
                                  overshoot_type="=="
                                  overshoot_value="0"/>
            </RetryUntilSuccessful>
          </ForceSuccess>
          <RetryUntilSuccessful num_attempts="2">
            <ImageXYawRegulator direction=""
                                image_segment="0.8"
                                tolerance="0.01"
                                overshoot_type="=="
                                overshoot_value="0"/>
          </RetryUntilSuccessful>
          <ForceSuccess>
            <ImageXYawRegulator direction=""
                                image_segment="0.5"
                                tolerance="0.01"
                                overshoot_type="=="
                                overshoot_value="0"/>
          </ForceSuccess>
          <Sleep msec="1000"/>
          <Translate frame_id="base_link"
                     x="0.2"/>
          <Sleep msec="3000"/>
          <ImageXYawRegulator direction=""
                              image_segment="0.5"
                              tolerance="0.01"
                              overshoot_type="=="
                              overshoot_value="0"/>
          <ImageXYawRegulator direction=""
                              image_segment="0.8"
                              tolerance="0.01"
                              overshoot_type="=="
                              overshoot_value="0"/>
          <ImageXYawRegulator direction=""
                              image_segment="0.5"
                              tolerance="0.01"
                              overshoot_type="=="
                              overshoot_value="0"/>
          <Sleep msec="1000"/>
          <Translate frame_id="base_link"
                     x="0.2"/>
        </Sequence>
      </ForceFailure>
    </RetryUntilSuccessful>
  </BehaviorTree>

  <BehaviorTree ID="test_translate">
    <Sequence>
      <AlwaysSuccess/>
      <Translate frame_id="base_link"
                 x="0.2"/>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="ImageXYawRegulator"
            editable="true">
      <input_port name="direction"
                  default="0">0 - Y in image, 1 - X in image</input_port>
      <input_port name="image_segment"
                  default="0.5">Represents the image segment relative to which the robot's position will be regulated.</input_port>
      <input_port name="tolerance"
                  default="0.03">As ration of the image size [0, 1]</input_port>
      <inout_port name="overshoot_type"
                  default="==">It can take values "&lt;=", "&gt;=", "==".</inout_port>
      <inout_port name="overshoot_value"
                  default="0.1"/>
    </Action>
    <Action ID="Translate"
            editable="true">
      <input_port name="frame_id"
                  default="base_link">Frame of the the target</input_port>
      <input_port name="x"
                  default="0">Target in x direction</input_port>
    </Action>
  </TreeNodesModel>

</root>
